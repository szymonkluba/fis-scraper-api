"use strict";(self.webpackChunkfis_scraper_frontend=self.webpackChunkfis_scraper_frontend||[]).push([[778],{6778:(ze,h,c)=>{c.r(h),c.d(h,{ArchiveModule:()=>Ee});var s=c(6895),x=c(7024),C=c(7337),A=c(7579),v=c(8505),w=c(2722),p=c(1831);const k=(0,p.ZF)("folders");var m=c(7340),O=c(9765),P=c(6936),y=c(2184),e=c(4650),_=c(7392),b=c(1481),j=c(3014),T=c(4859),g=c(3546),D=c(4850),d=c(7084),l=c(7155),Z=c(1572);function S(t,o){1&t&&e._UZ(0,"mat-progress-spinner",1)}let M=(()=>{class t{constructor(){this.isLoading=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-loading-spinner"]],inputs:{isLoading:"isLoading"},decls:1,vars:1,consts:[["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(n,i){1&n&&e.YNc(0,S,1,0,"mat-progress-spinner",0),2&n&&e.Q6J("ngIf",i.isLoading)},dependencies:[s.O5,Z.Ou],styles:["[_nghost-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center}mat-progress-spinner[_ngcontent-%COMP%]{margin:2rem}"],changeDetection:0}),t})();var Q=c(3900),F=c(9646);const J=["rank","bib","jumper-name","jumper-fis_code","jumper-nation-name","jumper-born","jump_1-distance","jump_1-distance_points","jump_1-speed","jump_1-judge_a","jump_1-judge_b","jump_1-judge_c","jump_1-judge_d","jump_1-judge_e","jump_1-judge_points","jump_1-gate","jump_1-gate_points","jump_1-wind","jump_1-wind_points","jump_1-total_points","jump_1-rank","jump_2-distance","jump_2-distance_points","jump_2-speed","jump_2-judge_a","jump_2-judge_b","jump_2-judge_c","jump_2-judge_d","jump_2-judge_e","jump_2-judge_points","jump_2-gate","jump_2-gate_points","jump_2-wind","jump_2-wind_points","jump_2-total_points","jump_2-rank","total_points","diff","disqualified"],N=["rank","country-name","total_points"],Y=(0,p.ZF)("raceDetails");var R=c(266);let f=(()=>{class t{transform(n){return n.toLowerCase().replace(/(^[a-z]|[-_][a-z])/g,i=>i.toUpperCase().replace("_"," "))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"capitalize",type:t,pure:!0}),t})(),E=(()=>{class t{transform(n,i){return i.split("-").reduce((a,r)=>function U(t,o){return!!t&&t.hasOwnProperty(o)}(a,r)?a[r]:a,n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"nestedValue",type:t,pure:!0}),t})(),z=(()=>{class t{transform(n,i){return n.replace(i,"")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"removePrefix",type:t,pure:!0}),t})();function I(t,o){if(1&t&&(e.TgZ(0,"th",12),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"removePrefix"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,e.xi3(3,3,n,i.prefixRegex))," ")}}function L(t,o){if(1&t&&(e.TgZ(0,"td",13),e._uU(1),e.ALo(2,"nestedValue"),e.qZA()),2&t){const n=o.$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,n,i)," ")}}function $(t,o){1&t&&(e.ynx(0,9),e.YNc(1,I,4,6,"th",10),e.YNc(2,L,3,4,"td",11),e.BQk()),2&t&&e.Q6J("matColumnDef",o.$implicit)}function H(t,o){1&t&&e._UZ(0,"tr",14)}function V(t,o){1&t&&e._UZ(0,"tr",15)}function G(t,o){if(1&t&&(e.TgZ(0,"div",4)(1,"table",5),e.YNc(2,$,3,1,"ng-container",6),e.YNc(3,H,1,0,"tr",7),e.YNc(4,V,1,0,"tr",8),e.qZA()()),2&t){const n=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Q6J("dataSource",n.participantcountry_set),e.xp6(1),e.Q6J("ngForOf",i.countriesColumns)("ngForTrackBy",i.trackByIndex),e.xp6(1),e.Q6J("matHeaderRowDef",i.countriesColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",i.countriesColumns)}}function K(t,o){1&t&&(e.TgZ(0,"th",27),e._uU(1,"Jumper"),e.qZA())}function X(t,o){1&t&&(e.TgZ(0,"th",28),e._uU(1,"Jump 1"),e.qZA())}function q(t,o){1&t&&(e.TgZ(0,"th",28),e._uU(1,"Jump 2"),e.qZA())}function W(t,o){1&t&&(e.TgZ(0,"th",29),e._uU(1,"Summary"),e.qZA())}function ee(t,o){if(1&t&&(e.TgZ(0,"th",12),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"removePrefix"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,e.xi3(3,3,n,i.prefixRegex))," ")}}function te(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"mat-icon",32),e.BQk()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Q6J("svgIcon",n.disqualified?"disqualified":"finished")("color",n.disqualified?"warn":null)("matTooltip",n.disqualified?"Disqualified":"Finished")}}function ne(t,o){if(1&t&&(e._uU(0),e.ALo(1,"nestedValue")),2&t){const n=e.oxw().$implicit,i=e.oxw().$implicit;e.hij(" ",e.xi3(1,1,n,i)," ")}}function oe(t,o){if(1&t&&(e.TgZ(0,"td",13),e.YNc(1,te,2,3,"ng-container",0),e.YNc(2,ne,2,4,"ng-template",null,31,e.W1O),e.qZA()),2&t){const n=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","disqualified"===i)("ngIfElse",n)}}function ie(t,o){if(1&t&&(e.ynx(0,30),e.YNc(1,ee,4,6,"th",10),e.YNc(2,oe,4,2,"td",11),e.BQk()),2&t){const n=o.$implicit,i=o.index,a=e.oxw(3);e.Q6J("matColumnDef",n)("sticky",i<6)("stickyEnd",i>a.jumpersColumns.length-4)}}function ae(t,o){1&t&&e._UZ(0,"tr",14)}function ce(t,o){if(1&t&&(e.ynx(0),e.YNc(1,ae,1,0,"tr",7),e.BQk()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("matHeaderRowDef",n.wideColumns)("matHeaderRowDefSticky",!0)}}function re(t,o){1&t&&e._UZ(0,"tr",14)}function le(t,o){1&t&&e._UZ(0,"tr",15)}function se(t,o){if(1&t&&(e.TgZ(0,"div",16)(1,"table",17),e.ynx(2,18),e.YNc(3,K,2,0,"th",19),e.BQk(),e.ynx(4,20),e.YNc(5,X,2,0,"th",21),e.BQk(),e.ynx(6,22),e.YNc(7,q,2,0,"th",21),e.BQk(),e.ynx(8,23),e.YNc(9,W,2,0,"th",24),e.BQk(),e.YNc(10,ie,3,3,"ng-container",25),e.YNc(11,ce,2,2,"ng-container",26),e.YNc(12,re,1,0,"tr",7),e.YNc(13,le,1,0,"tr",8),e.qZA()()),2&t){const n=e.oxw().ngIf,i=e.oxw();e.xp6(1),e.Q6J("dataSource",n.participant_set),e.xp6(9),e.Q6J("ngForOf",i.jumpersColumns)("ngForTrackBy",i.trackByIndex),e.xp6(1),e.Q6J("ngIf",i.wideColumns.length>0),e.xp6(1),e.Q6J("matHeaderRowDef",i.jumpersColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",i.jumpersColumns)}}function me(t,o){if(1&t&&(e.ynx(0),e.YNc(1,G,5,6,"div",2),e.YNc(2,se,14,7,"div",3),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngIf",n.participantcountry_set&&n.participantcountry_set.length),e.xp6(1),e.Q6J("ngIf",n.participant_set&&n.participant_set.length)}}function pe(t,o){1&t&&e._UZ(0,"app-loading-spinner")}let _e=(()=>{class t{constructor(n,i,a,r){this.scraperService=n,this.iconRegistry=i,this.sanitizer=a,this.store=r,this.countriesColumns=N,this.prefixRegex=new RegExp(/[a-z]*-|jump_\d/gm),this.jumpersColumns=J,this.wideColumns=["jumper","jump1","jump2","summary"],this.trackByIndex=y.z}ngAfterViewChecked(){this.table&&this.table.updateStickyColumnStyles()}ngOnInit(){this.iconRegistry.addSvgIcon("finished",this.sanitizer.bypassSecurityTrustResourceUrl("assets/finished.svg")),this.iconRegistry.addSvgIcon("disqualified",this.sanitizer.bypassSecurityTrustResourceUrl("assets/disqualified.svg"))}ngOnChanges(n){if(n.uuid){const i=(t=>(0,p.P1)(Y,o=>o.find(n=>n.uuid===t.uuid)))({uuid:this.uuid});this.raceData$=this.store.select(i).pipe((0,Q.w)(a=>a?(0,F.of)(a):this.scraperService.getRaceDetails(this.uuid)),(0,v.b)(a=>{a.no_jump_1&&a.no_jump_2&&(this.wideColumns=[]),a.no_jump_1&&(this.jumpersColumns=this.jumpersColumns.filter(r=>!r.includes("jump_1")),this.wideColumns=this.wideColumns.filter(r=>"jump1"!==r)),a.no_jump_2&&(this.jumpersColumns=this.jumpersColumns.filter(r=>!r.includes("jump_2")),this.wideColumns=this.wideColumns.filter(r=>"jump2"!==r))}))}}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(j.V),e.Y36(_.jv),e.Y36(b.H7),e.Y36(p.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-archive-race-details"]],viewQuery:function(n,i){if(1&n&&e.Gf(l.BZ,5),2&n){let a;e.iGM(a=e.CRH())&&(i.table=a.first)}},inputs:{uuid:"uuid"},features:[e.TTD],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loader",""],["class","table-container__countries mat-elevation-z4",4,"ngIf"],["class","table-container__jumpers mat-elevation-z4",4,"ngIf"],[1,"table-container__countries","mat-elevation-z4"],["mat-table","",1,"countries-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"table-container__jumpers","mat-elevation-z4"],["mat-table","",1,"jumpers-table",3,"dataSource"],["matColumnDef","jumper","sticky",""],["mat-header-cell","","colspan","6",4,"matHeaderCellDef"],["matColumnDef","jump1"],["mat-header-cell","","colspan","15",4,"matHeaderCellDef"],["matColumnDef","jump2"],["matColumnDef","summary","stickyEnd",""],["mat-header-cell","","colspan","4",4,"matHeaderCellDef"],[3,"matColumnDef","sticky","stickyEnd",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["mat-header-cell","","colspan","6"],["mat-header-cell","","colspan","15"],["mat-header-cell","","colspan","4"],[3,"matColumnDef","sticky","stickyEnd"],["regularContent",""],[3,"svgIcon","color","matTooltip"]],template:function(n,i){if(1&n&&(e.YNc(0,me,3,2,"ng-container",0),e.ALo(1,"async"),e.YNc(2,pe,1,0,"ng-template",null,1,e.W1O)),2&n){const a=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,i.raceData$))("ngIfElse",a)}},dependencies:[_.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,R.gM,s.sg,s.O5,M,f,s.Ov,E,z],styles:["[_nghost-%COMP%]{display:block;width:100%}*[_ngcontent-%COMP%]{scrollbar-color:rgb(55,55,55) rgb(66,66,66);scrollbar-width:thin}*[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px;width:6px}*[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#424242;border-radius:3px}*[_ngcontent-%COMP%]::-webkit-scrollbar-track:hover{background-color:#4d4d4d}*[_ngcontent-%COMP%]::-webkit-scrollbar-track:active{background-color:#4d4d4d}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#373737;border-radius:5px}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#2c2c2c}*[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:active{background-color:#2c2c2c}.table-container__jumpers[_ngcontent-%COMP%]{margin:1rem auto;max-height:40rem;height:-moz-fit-content;height:fit-content;max-width:63rem;overflow:auto;width:100%}.table-container__countries[_ngcontent-%COMP%]{margin:1rem auto;max-height:26rem;height:-moz-fit-content;height:fit-content;max-width:63rem;overflow:auto;width:100%}table.jumpers-table[_ngcontent-%COMP%]{border-radius:3px}table.jumpers-table[_ngcontent-%COMP%]   th.mat-mdc-header-cell[_ngcontent-%COMP%]{font-size:.75rem;font-weight:800;padding:0 .5rem;text-align:center}table.jumpers-table[_ngcontent-%COMP%]   td.mat-mdc-cell[_ngcontent-%COMP%]{font-size:.75rem;min-width:2rem;padding:0 .5rem;text-align:center}table.jumpers-table[_ngcontent-%COMP%]   th.cdk-column-jump1[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   th.cdk-column-jump2[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   th.cdk-column-jump_1-rank[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   td.cdk-column-jump_1-rank[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   th.cdk-column-jump_2-rank[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   td.cdk-column-jump_2-rank[_ngcontent-%COMP%]{border-right:rgba(255,255,255,.12) solid 1px}table.jumpers-table[_ngcontent-%COMP%]   th.cdk-column-jump1[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   th.cdk-column-jump_1-distance[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   td.cdk-column-jump_1-distance[_ngcontent-%COMP%]{border-left:rgba(255,255,255,.12) solid 1px}table.jumpers-table[_ngcontent-%COMP%]   td.mat-column-rank[_ngcontent-%COMP%], table.jumpers-table[_ngcontent-%COMP%]   td.mat-column-bib[_ngcontent-%COMP%]{width:2rem}table.countries-table[_ngcontent-%COMP%]{border-radius:3px}table.countries-table[_ngcontent-%COMP%]   .cdk-column-country-name[_ngcontent-%COMP%]{text-align:center}table.countries-table[_ngcontent-%COMP%]   .cdk-column-total_points[_ngcontent-%COMP%]{text-align:right}.mat-icon[_ngcontent-%COMP%]{height:1.125rem}"],changeDetection:0}),t})();function de(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.item.tournament.name," ")}}function ue(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,n.item.date)," ")}}function ge(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-icon",3),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("color",n.item.details?"accent":"warn"),e.xp6(1),e.hij(" ",n.item.details?"check_circle":"cancel"," ")}}function fe(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"mat-icon",4),e.ALo(2,"capitalize"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("svgIcon",n.item.kind)("matTooltip",e.lcZ(2,2,n.item.kind))}}function he(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",5),e.NdJ("click",function(a){e.CHM(n);const r=e.oxw();return a.stopPropagation(),e.KtG(r.downloadRace())}),e.TgZ(2,"mat-icon"),e._uU(3,"download"),e.qZA()(),e.BQk()}}function xe(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"button",6),e.NdJ("click",function(a){return e.CHM(n),e.oxw().expandItem(),e.KtG(a.stopPropagation())}),e.TgZ(2,"mat-icon"),e._uU(3),e.qZA()(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.expanded?"keyboard_arrow_up":"keyboard_arrow_down")}}function Ce(t,o){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.item[n.key]," ")}}let ve=(()=>{class t{constructor(){this.expanded=!1,this.downloadRaceEvent=new e.vpe,this.expandEvent=new e.vpe}downloadRace(){this.item&&this.downloadRaceEvent.emit(this.item)}expandItem(){this.item&&this.expandEvent.emit(this.expanded?null:this.item)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-folder-table-cell"]],inputs:{item:"item",key:"key",expanded:"expanded"},outputs:{downloadRaceEvent:"downloadRaceEvent",expandEvent:"expandEvent"},decls:8,vars:7,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"color"],[3,"svgIcon","matTooltip"],["mat-icon-button","",3,"click"],["mat-icon-button","","aria-label","Expand row",3,"click"]],template:function(n,i){1&n&&(e.ynx(0,0),e.YNc(1,de,2,1,"ng-container",1),e.YNc(2,ue,3,3,"ng-container",1),e.YNc(3,ge,3,2,"ng-container",1),e.YNc(4,fe,3,4,"ng-container",1),e.YNc(5,he,4,0,"ng-container",1),e.YNc(6,xe,4,1,"ng-container",1),e.YNc(7,Ce,2,1,"ng-container",2),e.BQk()),2&n&&(e.Q6J("ngSwitch",i.key),e.xp6(1),e.Q6J("ngSwitchCase","tournament"),e.xp6(1),e.Q6J("ngSwitchCase","date"),e.xp6(1),e.Q6J("ngSwitchCase","details"),e.xp6(1),e.Q6J("ngSwitchCase","kind"),e.xp6(1),e.Q6J("ngSwitchCase","download"),e.xp6(1),e.Q6J("ngSwitchCase","expand"))},dependencies:[T.RK,_.Hw,R.gM,s.RF,s.n9,s.ED,f,s.uU],changeDetection:0}),t})();function we(t,o){if(1&t&&(e.TgZ(0,"th",15),e._uU(1),e.ALo(2,"capitalize"),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,"expand"!==n?n:"")," ")}}function ye(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"td",16)(1,"app-folder-table-cell",17),e.NdJ("downloadRaceEvent",function(a){e.CHM(n);const r=e.oxw(4);return e.KtG(r.downloadRace(a))})("expandEvent",function(a){e.CHM(n);const r=e.oxw(4);return e.KtG(r.expandRace(a))}),e.qZA()()}if(2&t){const n=o.$implicit,i=e.oxw().$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("item",n)("key",i)("expanded",n===a.expandedElement)}}function be(t,o){1&t&&(e.ynx(0,13),e.YNc(1,we,3,3,"th",14),e.YNc(2,ye,2,3,"td",9),e.BQk()),2&t&&e.Q6J("matColumnDef",o.$implicit)}function je(t,o){if(1&t&&e._UZ(0,"app-archive-race-details",20),2&t){const n=e.oxw().$implicit;e.Q6J("uuid",n.uuid)}}function Te(t,o){if(1&t&&(e.TgZ(0,"td",16)(1,"div",18),e.YNc(2,je,1,1,"app-archive-race-details",19),e.qZA()()),2&t){const n=o.$implicit,i=e.oxw(3);e.uIk("colspan",i.displayedColumns.length),e.xp6(1),e.Q6J("@detailExpand",n===i.expandedElement?"expanded":"collapsed"),e.xp6(1),e.Q6J("ngIf",n===i.expandedElement)}}function Me(t,o){1&t&&e._UZ(0,"tr",21)}function Re(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"tr",22),e.NdJ("click",function(){const r=e.CHM(n).$implicit,u=e.oxw(3);return e.KtG(u.expandedElement=u.expandedElement===r?null:r)}),e.qZA()}if(2&t){const n=o.$implicit,i=e.oxw(3);e.ekj("expanded-row",i.expandedElement===n)}}function Ae(t,o){1&t&&e._UZ(0,"tr",23)}const ke=function(){return["expandedDetail"]};function Oe(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._UZ(3,"mat-icon",4),e.TgZ(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"mat-panel-description")(7,"button",5),e.NdJ("click",function(a){const u=e.CHM(n).$implicit,Ue=e.oxw(2);return a.stopPropagation(),e.KtG(Ue.downloadFolder(u.entries))}),e.TgZ(8,"mat-icon"),e._uU(9," download "),e.qZA()()()(),e.TgZ(10,"table",6),e.YNc(11,be,3,1,"ng-container",7),e.ynx(12,8),e.YNc(13,Te,3,3,"td",9),e.BQk(),e.YNc(14,Me,1,0,"tr",10),e.YNc(15,Re,1,2,"tr",11),e.YNc(16,Ae,1,0,"tr",12),e.qZA()()}if(2&t){const n=o.$implicit,i=e.oxw(2);e.xp6(5),e.hij(" ",n.name," "),e.xp6(5),e.Q6J("dataSource",n.entries),e.xp6(1),e.Q6J("ngForOf",i.displayedColumns)("ngForTrackBy",i.trackByIndex),e.xp6(3),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(7,ke))}}function Pe(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-accordion",2),e.YNc(2,Oe,17,8,"mat-expansion-panel",3),e.qZA(),e.BQk()),2&t){const n=o.ngIf,i=e.oxw();e.xp6(2),e.Q6J("ngForOf",n)("ngForTrackBy",i.trackByIndex)}}let De=(()=>{class t{constructor(n,i,a,r){this.iconRegistry=n,this.sanitizer=i,this.scraperService=a,this.store=r,this.displayedColumns=["fis_id","tournament","place","hill_size","date","kind","details","download","expand"],this.subscriptionEndSubject=new A.x,this.subscriptionEnd$=this.subscriptionEndSubject.asObservable(),this.folders$=this.store.select(k).pipe((0,v.b)(u=>this.store.dispatch((0,P.S)()))),this.spinnerState$=this.store.select(O.M),this.trackByIndex=y.z}ngOnInit(){this.iconRegistry.addSvgIcon("folder_icon",this.sanitizer.bypassSecurityTrustResourceUrl("assets/folder.svg")),this.iconRegistry.addSvgIcon("men",this.sanitizer.bypassSecurityTrustResourceUrl("assets/men.svg")),this.iconRegistry.addSvgIcon("women",this.sanitizer.bypassSecurityTrustResourceUrl("assets/women.svg")),this.iconRegistry.addSvgIcon("team",this.sanitizer.bypassSecurityTrustResourceUrl("assets/team.svg")),this.iconRegistry.addSvgIcon("other",this.sanitizer.bypassSecurityTrustResourceUrl("assets/other.svg"))}ngOnDestroy(){this.subscriptionEndSubject.next(null),this.subscriptionEndSubject.complete()}downloadFolder(n){const i=n.map(a=>a.uuid);this.scraperService.downloadSelectedFiles(i).pipe((0,w.R)(this.subscriptionEnd$)).subscribe()}downloadRace(n){this.scraperService.downloadFile(n).pipe((0,w.R)(this.subscriptionEnd$)).subscribe()}expandRace(n){this.expandedElement=n}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(_.jv),e.Y36(b.H7),e.Y36(j.V),e.Y36(p.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-archive"]],decls:10,vars:6,consts:[[3,"isLoading"],[4,"ngIf"],["multi","",1,"accordion"],[4,"ngFor","ngForOf","ngForTrackBy"],["svgIcon","folder_icon"],["mat-icon-button","",3,"click"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","element-row",3,"expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","detail-row",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"item","key","expanded","downloadRaceEvent","expandEvent"],[1,"detail-content"],[3,"uuid",4,"ngIf"],[3,"uuid"],["mat-header-row",""],["mat-row","",1,"element-row",3,"click"],["mat-row","",1,"detail-row"]],template:function(n,i){1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e._uU(3," Archive directories: "),e.qZA()(),e._UZ(4,"mat-divider"),e.TgZ(5,"mat-card-content"),e._UZ(6,"app-loading-spinner",0),e.ALo(7,"async"),e.YNc(8,Pe,3,2,"ng-container",1),e.ALo(9,"async"),e.qZA()()),2&n&&(e.xp6(6),e.Q6J("isLoading",e.lcZ(7,2,i.spinnerState$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(9,4,i.folders$)))},dependencies:[T.RK,g.a8,g.dn,g.dk,g.n5,D.d,d.pp,d.ib,d.yz,d.yK,d.u4,_.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,s.sg,s.O5,M,_e,ve,f,s.Ov],styles:["mat-card[_ngcontent-%COMP%]{margin:0 auto;width:min(70rem,100%)}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:1rem;min-height:10rem;width:100%}.accordion[_ngcontent-%COMP%]{width:100%}.accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header-description[_ngcontent-%COMP%]{align-items:center;justify-content:flex-end}.accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{align-items:center;font-size:1.25rem;gap:1rem;justify-content:flex-start;width:calc(100% - 1rem)}.accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{flex-basis:2rem;flex-shrink:0}.accordion[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex-basis:0;flex-shrink:1;flex-grow:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}table[_ngcontent-%COMP%]{width:100%}tr.detail-row[_ngcontent-%COMP%]{height:0}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):hover{background:rgba(255,255,255,.05)}tr.element-row[_ngcontent-%COMP%]:not(.expanded-row):active{background:rgba(255,255,255,.05)}.element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}td.mat-column-expand[_ngcontent-%COMP%], th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}td.mat-cell[_ngcontent-%COMP%]:not(td.mat-column-expand){text-align:center}"],data:{animation:[(0,m.X$)("detailExpand",[(0,m.SB)("collapsed",(0,m.oB)({height:"0px",minHeight:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*"})),(0,m.eR)("expanded <=> collapsed",(0,m.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]},changeDetection:0}),t})();const Se=[{path:c(3718).$.EMPTY.routerPath,component:De}];let Qe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[C.Bz.forChild(Se),C.Bz]}),t})(),Fe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez]}),t})();var Je=c(1702);let Ne=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez,x.h]}),t})(),Ye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez]}),t})(),Be=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez]}),t})(),Ee=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[x.h,Qe,Fe,s.ez,Je.t,Ne,Ye,Be]}),t})()}}]);